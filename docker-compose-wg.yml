version: "3"
services: 
  wg-easy:
    container_name: wg-easy
    image: weejewel/wg-easy
    volumes:
      - ./conf:/etc/wireguard
      - /lib/modules:/lib/modules
    ports:
      - "51820:51820/udp"
      - "51821:51821/tcp"
    cap_add:
      - NET_ADMIN
      - SYS_MODULE
    sysctls:
      - "net.ipv4.conf.all.src_valid_mark=1"
      - "net.ipv4.ip_forward=1"
    environment:
      - WG_HOST=wangy.vip
      - PASSWORD=1qaz@wsx
      - WG_DEFAULT_ADDRESS=192.168.100.x
      - WG_DEFAULT_DNS=180.76.76.76,223.5.5.5
      - WG_ALLOWED_IPS=192.168.1.0/24,192.168.100.0/24
    restart: unless-stopped
